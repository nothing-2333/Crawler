from loguru import logger

from crawler import Crawler, Env, Encrypt, Request

debug = logger.debug


if __name__ == "__main__":
    env = Env()
    base_headers = {
        'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36'
    }
    request = Request(base_headers)
    options = {
        "js": ["base.js"]
    }
    encrypt = Encrypt(options)
    crawler = Crawler(env, encrypt, request)

    crawler.encrypt.test()

    a = 'bd_ticket_guard_web_domain=2; ttwid=1%7CLmK5su5qE-ik3FNLngkKwwVlNd6WnuCNGMjrZZ1JaCM%7C1745748637%7C901ad26ff21b2682d2c8f4ea95ba3fddd77ff6a586538f118f56bcb4a9914b35; UIFID_TEMP=4be83ecefa579a300714166db9e569bafd8689fc248d1e190e384db8df203b81d3a7820cbaaddcac7b3c384934af4bef377017b3c68445429c61b9d612d33b3ef849dd3a614acd0acc1f66a8b57c9731; hevc_supported=true; stream_recommend_feed_params=%22%7B%5C%22cookie_enabled%5C%22%3Atrue%2C%5C%22screen_width%5C%22%3A1536%2C%5C%22screen_height%5C%22%3A864%2C%5C%22browser_online%5C%22%3Atrue%2C%5C%22cpu_core_num%5C%22%3A12%2C%5C%22device_memory%5C%22%3A8%2C%5C%22downlink%5C%22%3A10%2C%5C%22effective_type%5C%22%3A%5C%224g%5C%22%2C%5C%22round_trip_time%5C%22%3A50%7D%22; strategyABtestKey=%221745748643.253%22; volume_info=%7B%22isUserMute%22%3Afalse%2C%22isMute%22%3Afalse%2C%22volume%22%3A0.5%7D; home_can_add_dy_2_desktop=%221%22; passport_csrf_token=cd93b28fcf4bdb4602cf7d32bfed0ff0; passport_csrf_token_default=cd93b28fcf4bdb4602cf7d32bfed0ff0; IsDouyinActive=false; stream_player_status_params=%22%7B%5C%22is_auto_play%5C%22%3A0%2C%5C%22is_full_screen%5C%22%3A0%2C%5C%22is_full_webscreen%5C%22%3A0%2C%5C%22is_mute%5C%22%3A0%2C%5C%22is_speed%5C%22%3A1%2C%5C%22is_visible%5C%22%3A0%7D%22; FORCE_LOGIN=%7B%22videoConsumedRemainSeconds%22%3A180%7D; __security_mc_1_s_sdk_cert_key=d6afec60-4315-89a4; __security_mc_1_s_sdk_sign_data_key_web_protect=72b396da-48b3-9ec2; __security_mc_1_s_sdk_crypt_sdk=7d78a70c-476a-a8d8; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCUE5sZFJuZzhqaWs5YXcyYmpLV0RaNzFRdU9sQUNMcGhGc2JHa3p1QXJYMVdNY3lTV3I5eVlTQ2xrNWFvSnR5b2s2cy9aeTFuVHU1QThlRTEzeDBPTUk9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; bd_ticket_guard_client_web_domain=2; biz_trace_id=35a06c7c; sdk_source_info=7e276470716a68645a606960273f276364697660272927676c715a6d6069756077273f276364697660272927666d776a68605a607d71606b766c6a6b5a7666776c7571273f275e58272927666a6b766a69605a696c6061273f27636469766027292762696a6764695a7364776c6467696076273f275e5827292771273f273534313d33333d313230313234272927676c715a75776a716a666a69273f2763646976602778; bit_env=nXa8kJj_B87sUfi0kqej2K0aHcDD7rb3DLUgECoHmlYUyAtPc2pK4M94j7TFYo_8XS-5MiZ_eQphczBb4aODu228i1AgJxBZiN1ltZPNpl2V8-Jr7MsRvnI_7Zb6f2_8FDOKf4Hjfn3BRx6cwVvjZEF376VEwYi929JEbjGxI9NlI0B8RvmKT6t_MMYHLphWTn5gjn_iWhXII7VhHu5gt_7J5XpQ71CJioBGVTsL7YPwE5mltVCD9eIDrU0Yw5KhYNKrnw-iaoKjIl-VQY0nOj865e70IrPNWhf0UpoSsl9hhLQmyPW1UuJjOlIt4Y1gjt0znDOILYnnFqmiIiS7OAo32hT2-i5nLP6SciEbwHrFphMWIQ3qJr1KGBGKpdEo_zjVAP8Et5fzVhYv08EadDdeGjAGjZxxRJimGYweqsHw9YwXsLG-nAM1Jn_lM_IMCrpjFqsE3PSNtoiWcwLv0ZwY9EsvBNLxolOsiB6nigaA8PHHtCZ938mydM3lEqLk; gulu_source_res=eyJwX2luIjoiOWNkZmZlMTNlNDYxYjgwZGM0Mzc0NDg5MmQ0OTQ1YWM4YzUzMjE0YzA3YzYxMTVjYzljMGE0NTY3MzEzZWM3OCJ9; passport_auth_mix_state=ec3irh4tbphpvm0z4t246vyfn0nn1ow8'
    a = crawler.request.get_cookies("dict", a)
    
    print(a.keys())
    
    b = '__ac_nonce=0680a0de000af0b4c540d; __ac_signature=_02B4Z6wo00f01IeV2YwAAIDAsLEd0dHJQPCHtd0AAEY745; UIFID_TEMP=a0ab33eaf22428957f475f626977b173f94957c7849b046cc7f9250ce13f2ce8f7ec51167bac974c196bc3d0ec954d12ebac0f013ceae6705f1cdb5bcbd97756b2d491cf89391b3f5fbe7264c8e4039a; ttwid=1%7C5qx9Puag58_W3J2CzycQr_W-34cSm5L8oydbAqnaBFc%7C1745489378%7C554f76c760217bf5312bece69b44bdcd49a15ede34d435ffdc0b104171119146; device_web_cpu_core=12; device_web_memory_size=8; architecture=amd64; douyin.com; hevc_supported=true; IsDouyinActive=true; upgrade_tag=1; home_can_add_dy_2_desktop=%221%22; dy_swidth=1536; dy_sheight=864; stream_recommend_feed_params=%22%7B%22cookie_enabled%22%3Atrue%2C%22screen_width%22%3A1536%2C%22screen_height%22%3A864%2C%22browser_online%22%3Atrue%2C%22cpu_core_num%22%3A12%2C%22device_memory%22%3A8%2C%22downlink%22%3A10%2C%22effective_type%22%3A%224g%22%2C%22round_trip_time%22%3A100%7D%22; volume_info=%7B%22isUserMute%22%3Afalse%2C%22isMute%22%3Afalse%2C%22volume%22%3A0.5%7D; stream_player_status_params=%22%7B%22is_auto_play%22%3A0%2C%22is_full_screen%22%3A0%2C%22is_full_webscreen%22%3A0%2C%22is_mute%22%3A0%2C%22is_speed%22%3A1%2C%22is_visible%22%3A1%7D%22; strategyABtestKey=%221745489380.353%22; biz_trace_id=9ba2673c; x-web-secsdk-uid=63338421-3c4d-4e31-916c-805388e71f4b; s_v_web_id=verify_m9v7b5kx_mPENO1vP_E7qn_4CFZ_BIuD_xy0broXPgAkr; passport_csrf_token=1850c00d7ab5c61991321b413c669cce; passport_csrf_token_default=1850c00d7ab5c61991321b413c669cce; msToken=rWgPsLKWRMjci3Y4D5MrnmBx2UeQLLQOatt9iNafw8yVXmKsixjBzpebtuJDldvj31tgtvtJAuhmDn9G4Nym8ByChq7h5iW0qG3dFbya-QDtpQA4mr_zPt4wZq8O4fOd_1GuhocmTvL4hENVePYeCaZ30D94u5_lltHMdaXfQ9YR; xgplayer_user_id=488647245786; xg_device_score=7.864531956224656; fpk1=U2FsdGVkX1/gHtjbT%2BEzjkuL6cWAZZUxYxDK2fusd0jXYUvo6jVT8J4iAZr4nGjFQ0B4Brpem2cG4xqTGkn8bg%3D%3D; fpk2=99d149899c4f2f3d79df1f8e73f539ef; FORCE_LOGIN=%7B%22videoConsumedRemainSeconds%22%3A180%2C%22isForcePopClose%22%3A1%7D; bd_ticket_guard_client_web_domain=2; __security_mc_1_s_sdk_crypt_sdk=1f873782-4913-945f; __security_mc_1_s_sdk_cert_key=3ece38cd-4834-a7fd; __security_mc_1_s_sdk_sign_data_key_web_protect=2cbd6343-4182-a70e; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCQ21sS1N2TWxJNU1OQ2pha1puT3BEM1lYbVcyWTlzNWQ5Z0dUSy8wR1BCNExpenhsWU04ek5IUWxRNVkvYnpITFd3YStQVjRBbmxVTTVPMjBTenVsR0k9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; download_guide=20250424; passport_auth_mix_state=x4iq59ye9f4nd5t5xp2nrkgrp0bch8mivvyf8o26i57zisg2; sdk_source_info=7e276470716a68645a606960273f276364697660272927676c715a6d6069756077273f276364697660272927666d776a68605a607d71606b766c6a6b5a7666776c7571273f275e58272927666a6b766a69605a696c6061273f27636469766027292762696a6764695a7364776c6467696076273f275e5827292771273f27343132313d363c3d3130313234272927676c715a75776a716a666a69273f2763646976602778; bit_env=zC-JliaGarrE2hfuu8Fokwidtka5LTbJ2iTBLBN7h0e__lz51ZTQAY1-8zr2lrZuoV9U7Cm20Qo9ktb383zBT1_9JM0Y5Pt-FHFmr_9QpC-vLviVkJzztwwjbFENYEAwAY8Wlgsf-Gy8r7E4LbVAX-xfMarmqpuaduGzMbk9Lve42dZP3DRecoAM_EBMmw_KB7cOq6cvXEQZ38ZtpvSNZKIbW9TmzSKvsSybJRBXKODKl8NT5CpoQHa2SnCnoLa_eIJ8Q0tuMgcWxflQ3IoKsFNFRTm-TyUuIES8q5QC3cNIoEpYRbGx-WvzvnAJff41lm-BNR5lHo1_BfaCnsSfyscexfL4MNdMe0PS2qV3U_yDA44qtJHxjcpsNVFzJle1tbfNqW8Fj4LkQp9X11Q59ixAk703RKSDWHzz2s89aZs8djXvK9pmK9Lb_3B2fmLJhbxjvg_qLMircsCdXHujfhLPL2BWiddsLdrfmI1Nl_CNGfastT3HiFyC7OeQIJHWJ7781F2AeZJi_Xag7FZeitTlNZQ3nnFdlG9AaNCsaE4%3D; gulu_source_res=eyJwX2luIjoiOWVjNWI1NGQzNWVlMDQ1YzJlZjdlOGUwZDI0NmQ5NTE2MzVmZTQ5YWRiNTA1Njg3ZjFkM2MyMzJhOTc2MzEzOSJ9; odin_tt=917e584427902d37edfa3f50eb08445905471e1cd57fd02e1c660e6433018bfa37c919c0bb0ad0d8aa1d089b4841451a94cd87ac6d7142f5ce295f39ece55c30; d_ticket=442529f8310b432b01533ae8c2f653e65aa8a; passport_mfa_token=CjZOs3C2gpeL4Tupo4F9EIhXd46mqTidxoZTOUpZMlqV7pM4fNOxUbIdUHymSpFdAb%2F8%2BJAZ25AaSgo8AAAAAAAAAAAAAE7qKPxcmPJ4B1RgffI1EUVgZiqPp96TgjYVAp5Ib06i6OQuIFPM0Osqumq3h%2B%2BX7TiuEKDM7w0Y9rHRbCACIgEDR7c2yA%3D%3D; bd_ticket_guard_server_data=eyJ0aWNrZXQiOiJoYXNoLmhtY1hRMFNQUEZLbW93TE5iR29sRm5Db1hPUUE1eVRLOW52UGYvY3pKUkU9IiwidHNfc2lnbiI6InRzLjIuMDhlMDI5ODJkMGQ4YmE5YWE3ZmE1M2IzNTRmOGIwYzI1YTA5NjNkMGIwMGNlOGIyNmE0YTVmYmQ1NTZlZTg1ZGM0ZmJlODdkMjMxOWNmMDUzMTg2MjRjZWRhMTQ5MTFjYTQwNmRlZGJlYmVkZGIyZTMwZmNlOGQ0ZmEwMjU3NWQiLCJjbGllbnRfY2VydCI6InB1Yi5CQ21sS1N2TWxJNU1OQ2pha1puT3BEM1lYbVcyWTlzNWQ5Z0dUSy8wR1BCNExpenhsWU04ek5IUWxRNVkvYnpITFd3YStQVjRBbmxVTTVPMjBTenVsR0k9IiwibG9nX2lkIjoiMjAyNTA0MjQxODEwMDg1RjRERjhDQTZFNUYzQkI4RTZBRCIsImNyZWF0ZV90aW1lIjoxNzQ1NDg5NDA4fQ%3D%3D; is_staff_user=false; n_mh=qKUUauLjoCwUNk5FtErKprl65X5lIkjpKBnQBodrQww; passport_assist_user=CkD1gphYjxBxhOFhNMuW6sySiY5NGZiSMDaUj8OQ0fech0rVJnT29JtuzBNIdnw8lzZl492cLH4Tl2-HHnOaf-aqGkoKPAAAAAAAAAAAAABO6gl-x16YFadyliGUMHQ6EhBo0XftLMw-tPbUxbLKOy8Mhi3M41nLzlUanGm7puo6nhCZzO8NGImv1lQgASIBA0J34zU%3D; sessionid=5a20649ed303456eb7b6c1c394dbbf7f; sessionid_ss=5a20649ed303456eb7b6c1c394dbbf7f; sid_guard=5a20649ed303456eb7b6c1c394dbbf7f%7C1745489408%7C5184000%7CMon%2C+23-Jun-2025+10%3A10%3A08+GMT; sid_tt=5a20649ed303456eb7b6c1c394dbbf7f; sid_ucp_v1=1.0.0-KDIwMTE4ZTE4MzNmZjVlMDc0ZDJlYzg1MmExYzM1OTAyMzEwZjU4ZjEKIAighoDZiKx8EICcqMAGGO8xIAwwp-aiwAY4B0D0B0gEGgJsZiIgNWEyMDY0OWVkMzAzNDU2ZWI3YjZjMWMzOTRkYmJmN2Y; ssid_ucp_v1=1.0.0-KDIwMTE4ZTE4MzNmZjVlMDc0ZDJlYzg1MmExYzM1OTAyMzEwZjU4ZjEKIAighoDZiKx8EICcqMAGGO8xIAwwp-aiwAY4B0D0B0gEGgJsZiIgNWEyMDY0OWVkMzAzNDU2ZWI3YjZjMWMzOTRkYmJmN2Y; uid_tt=bcae7bfd810b6f2f87fbc2590d3b5b13; uid_tt_ss=bcae7bfd810b6f2f87fbc2590d3b5b13; bd_ticket_guard_web_domain=2; UIFID=a0ab33eaf22428957f475f626977b173f94957c7849b046cc7f9250ce13f2ce8f7ec51167bac974c196bc3d0ec954d1227c694d4f4fc1051d1e3db1463c6cfe35d4cc72e114abeb86137e4d7517bc4eebb1e244f2e39cd7207465c10a506e97a8188e31b8086cd64407d5584c63ed529cea9dcf211db59a1a728e7eeb288c32727c3154baa9a1f62758d3a844e493d464fbb5ccdb8f7e63a04870bf27b3e80b7164c20fe27983e59a1044285748ad942; login_time=1745489411993; SelfTabRedDotControl=%5B%5D; is_dash_user=1; passport_fe_beating_status=true; my_rd=2; __security_server_data_status=1; publish_badge_show_info=%220%2C0%2C0%2C1745489411993%22; SelectedFeedCache=3; FOLLOW_NUMBER_YELLOW_POINT_INFO=%22MS4wLjABAAAALzk8xmoUnjhg13b6svkydKVtdg0VuTTmPkToOUqpzeo/1745489500000/0/1745489411993/0%22'
    b = crawler.request.get_cookies("dict", b)
    
    for key in a.keys():
        if key not in b.keys():
            print("----->", key)